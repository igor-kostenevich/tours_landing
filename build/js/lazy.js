function o(e,t){return e[t]===r?T[t]:e[t]}function m(){var e=w.pageYOffset;return e===r?I.scrollTop:e}function p(e,t){var o=T["on"+e];o&&(B(o)?o.call(t[0]):(o.addClass&&t.addClass(o.addClass),o.removeClass&&t.removeClass(o.removeClass))),t.trigger("lazy"+e,[t]),c()}function y(e){p(e.type,C(this).off(b,y))}function e(e){if(X.length){e=e||T.forceLoad,k=1/0;var t,o,n=m(),a=w.innerHeight||I.clientHeight,i=w.innerWidth||I.clientWidth;for(t=0,o=X.length;t<o;t++){var r,l=X[t],s=l[0],c=l[z],d=!1,f=e||L(s,E)<0;if(C.contains(I,s)){if(e||!c.visibleOnly||s.offsetWidth||s.offsetHeight){if(!f){var u=s.getBoundingClientRect(),A=c.edgeX,g=c.edgeY;f=(r=u.top+n-g-a)<=n&&u.bottom>-g&&u.left<=i+A&&u.right>-A}if(f){l.on(b,y),p("show",l);var h=c.srcAttr,v=B(h)?h(l):s.getAttribute(h);v&&(s.src=v),d=!0}else r<k&&(k=r)}}else d=!0;d&&(L(s,E,0),X.splice(t--,1),o--)}o||p("complete",C(I))}}function t(){1<u?(u=1,e(),setTimeout(t,T.throttle)):u=0}function c(e){X.length&&(e&&"scroll"===e.type&&e.currentTarget===w&&k>=m()||(u||setTimeout(t,0),u=2))}function n(){s.lazyLoadXT()}function a(){e(!0)}var C,w,i,r,z,E,b,l,I,T,d,s,B,f,L,X,k,u;C=window.jQuery||window.Zepto||window.$,w=window,i=document,z="lazyLoadXT",E="lazied",b="load error",l="lazy-hidden",I=i.documentElement||i.body,T={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:w.onscroll===r||!!w.operamini||!I.getBoundingClientRect,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"lazyloadall",oninit:{removeClass:"lazy"},onshow:{addClass:l},onload:{removeClass:l,addClass:"lazy-loaded"},onerror:{removeClass:l},checkDuplicates:!0},d={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},s=C(w),B=C.isFunction,f=C.extend,L=C.data||function(e,t){return C(e).data(t)},X=[],u=k=0,C[z]=f(T,d,C[z]),C.fn[z]=function(a){var e,i=o(a=a||{},"blankImage"),r=o(a,"checkDuplicates"),t=o(a,"scrollContainer"),l=o(a,"show"),s={};for(e in C(t).on("scroll",c),d)s[e]=o(a,e);return this.each(function(e,t){if(t===w)C(T.selector).lazyLoadXT(a);else{var o=r&&L(t,E),n=C(t).data(E,l?-1:1);if(o)return void c();i&&"IMG"===t.tagName&&!t.src&&(t.src=i),n[z]=f({},s),p("init",n),X.push(n),c()}})},C(i).ready(function(){p("start",s),s.on(T.updateEvent,c).on(T.forceEvent,a),C(i).on(T.updateEvent,c),T.autoInit&&(s.on(T.loadEvent,n),n())});